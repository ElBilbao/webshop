<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous"
    />
    <link
      rel="icon"
      type="image/png"
      href="https://i1.wp.com/impressweb.co.za/site/wp-content/uploads/2019/11/1-top-shopping.png?fit=1600%2C1600&ssl=1"
    />

    <title>Login</title>
  </head>
  <body>
    <div style="text-align: center">
      <h1>WebShop</h1>
      <form>
        <label for="txtUsername">Username:</label>
        <input type="text" id="txtUsername" /><br />

        <label for="txtPassword">Password:</label>
        <input type="password" id="txtPassword" /><br />

        <input type="submit" id="submit" value="Login" />
        <input type="submit" id="register" value="Register" />
      </form>
    </div>

    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script>
      const txtUsername = document.getElementById("txtUsername");
      const txtPassword = document.getElementById("txtPassword");

      const btnSubmit = document.getElementById("submit");
      btnSubmit.addEventListener("click", (e) => {
        e.preventDefault();

        let username = txtUsername.value.trim();
        let password = txtPassword.value;

        // Comment to check out how server validation is working too
        if (username === "") {
          alert("Type your username");
          return;
        }
        if (password === "") {
          alert("Type your password");
          return;
        }

        axios
          .post("http://127.0.0.1:3000/login", {
            username: username,
            password: password,
          })
          .then((response) => {
            console.log(response);

            alert(`Correct login, you are being redirected`);
            window.location.replace("http://127.0.0.1:3000/");
          })
          .catch((error) => {
            console.log(error.response.data);

            alert(`Error: ${error.response.data}`);
          });
      });

      const btwRegister = document.getElementById("register");
      btwRegister.addEventListener("click", (e) => {
        e.preventDefault();
        window.location.href = "http://127.0.0.1:3000/register";
      });
    </script>
  </body>
</html>
